# https://github.com/flavienbwk/opensearch-docker-compose/blob/main/README.md
https://opensearch.org/docs/latest/install-and-configure/install-opensearch/docker/


docker pull opensearchproject/opensearch:latest
docker pull opensearchproject/opensearch-dashboards:latest

docker run -d -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opensearchproject/opensearch:latest

https://localhost:9200/

curl https://localhost:9200 -ku 'admin:admin'


 -e "discovery.type=single-node"

http://localhost:5601/


sudo docker compose -f ./docker-compose-opensearch.yml up -d
docker compose -f ./docker-compose-opensearch-dashboard-cert.yml up -d
docker compose  up -d

certificates
https://github.com/flavienbwk/opensearch-docker-compose/blob/main/generate-certs.sh
https://support.dnsimple.com/categories/ssl-certificates/


/usr/share/opensearch/data/nodes

sudo chown -R 1000:1000 /usr/share/opensearch/

/usr/share/opensearch/data/nodes

sudo chmod -R 47777 /usr/share/opensearch/
sudo chmod -R 47777 /usr/share/opensearch/data/
sudo chmod -R 47777 /usr/share/opensearch/data/nodes/


sudo chown -R 1000:1000 /usr/share/opensearch/

I am running OpenSearch using Docker on Windows, docker is running in the WSL.
How do I set a user for the OpenSearch process, so that the running OpenSearch process will have access to /usr/share/opensearch and subfolders

FROM opensearchproject/opensearch:latest

# Set user to opensearch
USER opensearch


# Set permissions for /usr/share/opensearch
sudo chown -R opensearch:opensearch /usr/share/opensearch

# Set user to opensearch
USER opensearch

sudo docker compose --profile=opensearch up -d



docker pull opensearchproject/opensearch:latest
docker pull opensearchproject/opensearch-dashboards:latest

docker run -d -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opensearchproject/opensearch:latest
sudo docker run -d -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opensearchproject/opensearch:latest



User for permissions to volumes:

Create an opensearch  User:

sudo adduser opensearch

You'll be prompted to set a password for the new user and provide some optional user information. 
If you don't want to set any additional information, you can just press Enter to skip through the prompts.

To ensure that the user was created successfully, you can check the contents of the /etc/passwd file:

grep opensearch /etc/passwd


This should return a line with details about the opensearch user, indicating that the user was created successfully.



sudo chown -R opensearch /usr/share/opensearch/data
sudo chown -R opensearch /projects/opensearch/opensearch-data

or 

sudo chown -R 1000:1000 /usr/share/opensearch/data
sudo chown -R 1000:1000 /projects/opensearch/opensearch-data


sudo docker run as current user:
sudo docker run -u $(id -u):$(id -g) ...


add to yml file:

user: "${UID}:${GID}"

Current User:
if running current user:

UID=$(id -u) GID=$(id -g) docker compose  -f docker-compose-opensearch-dashboard.yml up -d



https://localhost:9200/

curl https://localhost:9200 -ku 'admin:admin'


 -e "discovery.type=single-node"

http://localhost:5601/

sudo docker compose -f .\docker-compose-opensearch-dashboard-cert.yml up -d
sudo docker compose  up -d

certificates
https://github.com/flavienbwk/opensearch-docker-compose/blob/main/generate-certs.sh
https://support.dnsimple.com/categories/ssl-certificates/


/usr/share/opensearch/data/nodes

sudo chown -R 1000:1000 /usr/share/opensearch/

sudo chmod -R 750 /usr/share/opensearch/

sudo chown -R $USER:1000 /usr/share/opensearch/data /
sudo chown -R $USER:1000 /mnt/c/projects/opensearch/opensearch-data/

sudo chown -R karlgodtliebsen:karlgodtliebsen /usr/share/opensearch/data/
sudo chown -R karlgodtliebsen:karlgodtliebsen /usr/share/opensearch/data/nodes/
sudo chown -R karlgodtliebsen:karlgodtliebsen /mnt/c/projects/opensearch/opensearch-data/

sudo chown -R opensearch:opensearch /usr/share/opensearch/data/
sudo chown -R opensearch:opensearch /usr/share/opensearch/data/nodes/
sudo chown -R opensearch:opensearch /projects/
sudo chown -R opensearch:opensearch /projects/opensearch/
sudo chown -R opensearch:opensearch /projects/opensearch/opensearch-data/


sudo chown -R 1000:1000 /usr/share/opensearch/data/
sudo chown -R 1000:1000 /usr/share/opensearch/data/nodes/
sudo chown -R 1000:1000 /projects/
sudo chown -R 1000:1000 /projects/opensearch/
sudo chown -R 1000:1000 /projects/opensearch/opensearch-data/


grep 1000:1000 /etc/passwd
grep karlgodtliebsen /etc/passwd
grep 1001:1001 /etc/passwd
grep opensearch /etc/passwd


sudo chown -R $USER:1000 /mnt/c/projects/opensearch/opensearch-data/

/usr/share/opensearch/data/nodes

sudo chown -R 1000:1000 /usr/share/opensearch/data
sudo chown -R 1000:1000 /mnt/c/projects/opensearch/opensearch-data

///projects/opensearch/opensearch-data:/usr/share/opensearch/data 